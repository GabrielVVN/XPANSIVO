<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/static/Styles/styles.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/scrollreveal"></script>
    <title>X-PANSIVO</title>
</head>
<body>
    <header>
        <nav id="navbar">
            <a href="#">
                <i class="fa-solid fa-x" id="nav_logo">-PANSIVO</i>
            </a>

            <ul id="nav_list">
                <li class="nav-item active">
                    <a href="#home">Início</a>
                </li>
                <li class="nav-item">
                    <a href="#testimonials">Classificações</a>
                </li>
            </ul>

            <button id="mobile_btn">
                <i class="fa-solid fa-bars"></i>
            </button>
        </nav>

        <div id="mobile_menu">
            <ul id="mobile_nav_list">
                <li class="nav-item">
                    <a href="#home">Início</a>
                </li>
                <li class="nav-item">
                    <a href="#testimonials">Classificações</a>
                </li>
            </ul>
        </div>
    </header>

    <main id="content">
        <section id="home">
            <div class="shape"></div>
            <div id="cta">
                <h2 class="site-brand-mobile"><i class="fa-solid fa-x"></i>-PANSIVO</h2>
                
                <h1 class="title">
                    Multiplicando suas habilidades em cada
                    <span>operação!</span>
                </h1>

                <p class="description">
                    A prática leva à perfeição, e a perfeição começa aqui.
                </p>

                <div id="dishes">
                    <div class="dish">
                        <div class="dish-heart">
                            <i class="fa-solid fa-xmark"></i>
                        </div>
                        <h3 class="dish-title">
                            Multiplicação 
                        </h3>
                        <span class="dish-description">
                            A multiplicação é uma operação matemática essencial que calcula o total de somas repetidas de um número.
                        </span>
                        <div class="dish-price">
                            <a href="/multiplicacao" class="btn-default">
                                <i class="fa-solid fa-xmark"></i>
                            </a>
                        </div>
                    </div>

                    <!-- <div class="dish">
                        <div class="dish-heart">
                            <i class="fa-solid fa-divide"></i>
                        </div>
                        <h3 class="dish-title">
                            Divisão
                        </h3>
                        <span class="dish-description">
                            A divisão é uma operação matemática que distribui um número em partes iguais para calcular a quantidade por parte.
                        </span>
                        <div class="dish-price">
                            <a href="#" class="btn-default">
                                <i class="">Em breve</i>
                            </a>
                        </div>
                    </div> -->
                </div>

                <!-- <div class="social-media-buttons">
                    <a href="https://br.linkedin.com/in/gabriel-vieiran">
                        <i class="fa-brands fa-linkedin"></i>
                    </a>
                    <a href="mailto:gabriel.vvieiran@gmail.com">
                        <i class="fa-regular fa-envelope"></i>
                    </a>
                    <a href="#">
                        <i class="fa-brands fa-github"></i>
                    </a>
                </div> -->
            </div>
        </section>

        <section id="testimonials">
            <div id="testimonials_content">
                <h2 class="section-title">
                    Classificações
                </h2>
                
                <div style="margin-top: 30px;">
                    <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
                        <button id="btnRankingGeral" class="btn-ranking active" onclick="carregarRanking('geral')">
                            Ranking Geral
                        </button>
                        <button id="btnRankingDia" class="btn-ranking" onclick="carregarRanking('dia')">
                            Ranking do Dia
                        </button>
                    </div>
                    
                    <div id="rankingContainer" style="max-width: 600px; margin: 0 auto;">
                        <div id="rankingContent" style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <p style="text-align: center; color: #666;">Carregando...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <img src="src/images/wave.svg" alt="">

        <div id="footer_items">
            <span id="copyright">
                <span class="copyright-text">
                    &copy; 2025 <a href="https://lapp.app.br/" class="link-lab">Laboratório de Desenvolvimento de Aplicativos</a> | Gabriel Victor Vieira Nunes
                </span>
                
                <div class="social-media-buttons">
                    <a href="https://br.linkedin.com/in/gabriel-vieiran" aria-label="LinkedIn Pessoal">
                        <i class="fa-brands fa-linkedin"></i>
                    </a>
                    <a href="https://www.instagram.com/gabriel.vieiran/#" aria-label="Instagram Pessoal">
                        <i class="fa-brands fa-instagram"></i>
                    </a>
                    <a href="https://github.com/GabrielVVN" aria-label="Github Pessoal"> 
                        <i class="fa-brands fa-github"></i>
                    </a>
                </div>
            </span>
            </div>
        </div>
    </footer>
    <script src="/static/JavaScript/script.js"></script>
    <script>
        // Função para carregar rankings
        async function carregarRanking(tipo) {
            try {
                const endpoint = tipo === 'geral' ? '/api/ranking/geral' : '/api/ranking/dia';
                const response = await fetch(endpoint);
                const ranking = await response.json();
                
                exibirRanking(ranking, tipo);
                
                // Atualizar botões ativos
                document.getElementById('btnRankingGeral').classList.toggle('active', tipo === 'geral');
                document.getElementById('btnRankingDia').classList.toggle('active', tipo === 'dia');
                
            } catch (error) {
                console.error('Erro ao carregar ranking:', error);
                document.getElementById('rankingContent').innerHTML = 
                    '<p style="text-align: center; color: #d32f2f;">Erro ao carregar ranking</p>';
            }
        }
        
        // Função para exibir ranking
        function exibirRanking(dados, tipo) {
            let html = '';
            
            if (!dados || dados.length === 0) {
                html = '<p style="text-align: center; color: #999;">Nenhum resultado ainda</p>';
            } else {
                html = '<table style="width: 100%; border-collapse: collapse;">';
                html += '<thead><tr style="background: #FF6B6B; color: white;">';
                html += '<th style="padding: 10px; text-align: left;">#</th>';
                html += '<th style="padding: 10px; text-align: left;">Jogador</th>';
                html += '<th style="padding: 10px; text-align: center;">Acertos</th>';
                html += '<th style="padding: 10px; text-align: center;">Erros</th>';
                html += '</tr></thead>';
                html += '<tbody>';
                
                dados.forEach((jogador, index) => {
                    const acertos = tipo === 'dia' ? jogador.acertos_dia : jogador.acertos_totais;
                    const erros = tipo === 'dia' ? jogador.erros_dia : jogador.erros_totais;
                    
                    html += `<tr style="border-bottom: 1px solid #ddd; ${index % 2 === 0 ? 'background: #fff;' : 'background: #fafafa;'}">
                        <td style="padding: 12px; font-weight: bold; color: #FF6B6B;">${index + 1}º</td>
                        <td style="padding: 12px;">${jogador.nome}</td>
                        <td style="padding: 12px; text-align: center; color: #4caf50; font-weight: bold;">${acertos || 0}</td>
                        <td style="padding: 12px; text-align: center; color: #f44336;">${erros || 0}</td>
                    </tr>`;
                });
                
                html += '</tbody></table>';
            }
            
            document.getElementById('rankingContent').innerHTML = html;
        }
        
        // Carregar ranking geral ao abrir a página
        document.addEventListener('DOMContentLoaded', function() {
            carregarRanking('geral');
            
            // Atualizar ranking a cada 30 segundos
            setInterval(() => {
                const tipoAtivo = document.getElementById('btnRankingGeral').classList.contains('active') ? 'geral' : 'dia';
                carregarRanking(tipoAtivo);
            }, 30000);
        });
    </script>
    
    <style>
        .btn-ranking {
            padding: 10px 20px;
            border: 2px solid #FF6B6B;
            background: white;
            color: #FF6B6B;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-ranking:hover {
            background: #ffebee;
        }
        
        .btn-ranking.active {
            background: #FF6B6B;
            color: white;
        }
    </style>